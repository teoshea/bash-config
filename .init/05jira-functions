jira_granta_baseurl="https://grantadesign.atlassian.net"
jira_rest_url=$jira_granta_baseurl/rest/api/2
jira_authentication_file=~/.jira_authentication

__invoke_jira_restmethod()
{
    if [ -z ${1+x} -o -z ${2+x} ]; then
       echo "__invoke_jira_restmethod - Invoke Jira REST method..."
       echo "Usage: __invoke_jira_restmethod command-type parameter"
       return -1
    fi

    local command=$1
    local parameter=$2

    local password=`gpg2 -q --batch --decrypt $jira_authentication_file`
    local base64_password="$(echo -ne $password | base64)"
    
    local header_content_type="Content-Type: application/json"
    local header_authorization="Authorization: Basic $base64_password"

    curl -s -X GET -H "Authorization: Basic $base64_password" -H "Content-Type: application/json" "$jira_rest_url/$command/$parameter"
}

get_jira_issue_summary()
{
    if [ -z ${1+x} ]; then
       echo "get_jira_issue_summary - Retrieve the summary for a jira issue..."
       echo "Usage: get_jira_issue_summary issue-id"
       return -1
    fi

    __invoke_jira_restmethod issue $1 | jq ".fields.summary"
}
